<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core" template="/layout/dialog.xhtml">

	<ui:define name="head">
		<link rel="stylesheet" href="#{_ctx}/css/video.css" />
		<style type="text/css">
body {
	background-color: #000;
}
</style>
	</ui:define>


	<ui:define name="body">


		<div id="video-drp">
			<div class="ui compact menu" id="vidRes">
				<div class="ui simple dropdown item">
					#{messages['Video']} <i class="dropdown icon"></i>
					<div class="menu">
						<div class="item">
							<s:link value="HD" propagation="none" onclick="redirect(this);">
								<f:param name="resolution" value="large"></f:param>
							</s:link>
						</div>
						<div class="item">
							<s:link value="480" propagation="none" onclick="redirect(this);">
								<f:param name="resolution" value="medium"></f:param>
							</s:link>
						</div>
						<div class="item">
							<s:link value="360" propagation="none" onclick="redirect(this);">
								<f:param name="resolution" value="small"></f:param>
							</s:link>
						</div>
					</div>
				</div>
			</div>
		</div>

		<video id="my-video" class="video-js" controls="controls"
			preload="auto" width="800" height="580"
			poster="video.image?courseId=#{courseId}" data-setup="{}">
			<p class="vjs-no-js">To view this video please enable JavaScript,
				and consider upgrading to a web browser</p>
		</video>

		<script src="#{_ctx}/js/video.js"></script>
		<script type="text/javascript">
			window.HELP_IMPROVE_VIDEOJS = false;
			var myPlayer;
			videojs("my-video").ready(function(){
				var t = '#{chapterHome.token}'
				var loc = window.location.origin + "#{_ctx}/"+t+".play?resolution=#{resolution}";
				myPlayer = this;
				myPlayer.src({"type":"video/mp4", "src":loc});
				myPlayer.width(jQuery(document).width());
				var h = jQuery(document).height();
				var fit = (h*35)/100;
				myPlayer.height(Math.round(h-fit));
			});
			jQuery(document).ready(function(){

				jQuery( window ).resize(function() {
					
					myPlayer.width(jQuery(document).width());
					var h = jQuery(document).height();
					var fit = (h*35)/100;
					myPlayer.height(Math.round(h-fit));
					});	 
				
			});
			
		</script>

		<script>
			jQuery(document).ready(function(){
				jQuery('#vidRes').dropdown();
			});

			function redirect(atag)
			{
				location.href = atag.href;
			}
		</script>



	</ui:define>
</ui:composition>
