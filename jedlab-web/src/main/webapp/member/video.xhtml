<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core" template="/layout/layout.xhtml">

	<ui:define name="head">
		<link rel="stylesheet" href="#{_ctx}/css/video.css" />

		<style type="text/css">
</style>
	</ui:define>

	<ui:define name="sidebar">
		<script>
			jQuery(document).ready(function(){
				if(common.isMobile())
					jQuery(".360p").hide();
			});
		</script>

		<div
			class="ui vertical inverted sidebar thin menu left locale-direction w3-centered"
			id="settings" style="text-align: center;">

			<h:outputText value="#{chapterHome.course.name}" />
			<br />
			<h:outputText value="#{chapterHome.duration}" />
			<br />
			<s:link value="360p" propagation="none" styleClass="360p"
				includePageParams="false" onclick="redirect(this);">
				<f:param name="resolution" value="small"></f:param>
			</s:link>
			<s:button view="/course.xhtml" styleClass="btn btn-yellow"
				includePageParams="false" propagation="none"
				value="#{messages['Back']}" style="display:inline;">
				<f:param name="courseId" value="#{courseId}"></f:param>
			</s:button>
			<br />

		</div>
	</ui:define>


	<ui:define name="body">





		<div
			class="ui stackable very relaxed center aligned grid container w3-padding-32">

			<div class="row">
				<div class="twelve wide column">


					<video id="my-video" controls="controls"
						class="video-js vjs-default-skin" preload="auto"
						style="width: 760px; max-width: 100%; height: 600px;"
						poster="video.image?videoCourseId=#{courseId}"
						data-setup='{"fluid": true}'>
						<p class="vjs-no-js">To view this video please enable
							JavaScript, and consider upgrading to a web browser</p>
					</video>

					<p></p>

				</div>
			</div>



		</div>

		<div
			class="ui stackable very relaxed center aligned grid container w3-row-padding w3-padding-8">

			<button type="button" onclick="settings();" class="btn btn-blue">#{messages['Settings']}</button>

		</div>


		<script type="text/javascript">
				window.HELP_IMPROVE_VIDEOJS = false;		 
		</script>
		<script src="#{_ctx}/js/video.js"></script>
		<script>
				videojs("my-video").ready(function(){
					var t = '#{chapterHome.token}'
					var loc = window.location.origin + "#{_ctx}/"+t+".play?resolution=#{resolution}";
					myPlayer = this;		
					if(common.isMobile())
						myPlayer.src({"type":"video/webm", "src":loc+"&amp;mobile=true"});
					else			
						myPlayer.src({"type":"video/mp4", "src":loc});					
				});

				function redirect(atag)
				{
					location.href = atag.href;
				}

				jQuery(document).ready(function(){
						//jQuery('#settings').sidebar('toggle');
				});

				function settings()
				{
					jQuery('#settings').sidebar('setting', 'transition', 'overlay').sidebar('toggle');
				}

		</script>



	</ui:define>
</ui:composition>
