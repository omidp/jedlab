<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core">


	<div style="margin-top: 60px; margin-right: 10px"
		class="locale-direction">

		<s:fragment rendered="#{s:hasRole('Admin')}">
			<s:button value="#{messages['Create']} #{messages['Course']}"
				view="/admin/courseEdit.xhtml" 
				propagation="none" includePageParams="false" ></s:button>
			<h:dataTable value="#{courseQuery.resultList}" var="_item" styleClass="ui selectable celled table">
				
				<h:column>
					<s:link value="#{_item.name}" view="/admin/courseEdit.xhtml" propagation="none" includePageParams="false">
						<f:param name="courseId" value="#{_item.id}"></f:param>
					</s:link>
				</h:column>
				
				<h:column>
					<s:link value="#{messages['Add']} #{messages['Chapter']}" view="/admin/chapterEdit.xhtml" propagation="none" includePageParams="false">
						<f:param name="courseId" value="#{_item.id}"></f:param>
					</s:link>
				</h:column>
				
				
				
				<h:column>
					<s:link value="#{messages['List']} #{messages['Chapter']}" view="/admin/chapterList.xhtml" propagation="none" includePageParams="false">
						<f:param name="courseId" value="#{_item.id}"></f:param>
					</s:link>
				</h:column>
			
			</h:dataTable>
			
		
		</s:fragment>


		<s:fragment rendered="#{not s:hasRole('Admin')}">

			<div class="ui link cards">

				<c:forEach items="#{courseQuery.resultList}" var="_item">
					<div class="card">
						<div class="image">

							<s:graphicImage value="#{_item.image}"
								style="height:250px;"
								rendered="#{_item.hasImage}">
								<s:transformImageSize maintainRatio="true" height="250"></s:transformImageSize>	
							</s:graphicImage>

							<s:graphicImage value="/images/no_video_photo.png"
								style="height:250px;"
								rendered="#{_item.hasImage == false}">
								<s:transformImageSize maintainRatio="true" height="250"></s:transformImageSize>		
							</s:graphicImage>

						</div>
						<div class="content">
							<div class="header">

								<s:link propagation="none" includePageParams="false"
									rendered="#{identity.loggedIn and s:hasRole('Admin')}"
									view="/admin/chapterEdit.xhtml" styleClass="item">
									<h:outputText value="#{_item.name}" />
									<f:param name="courseId" value="#{_item.id}"></f:param>
								</s:link>


								<h:outputText styleClass="locale-font" value="#{_item.name}"
									rendered="#{!s:hasRole('Admin')}" />

							</div>
							<div class="meta">
								#{messages['Publish_Date']} :
								<h:outputText value="#{_item.createdDate}"
									converter="#{persianDateConverter}" />
								<br />
								#{messages['Level']} :  <h:outputText value="#{_item.level}" />
							</div>
							<div class="description">
								 #{_item.chapters.size()} #{messages['Chapter']}
							</div>
						</div>
						<div class="extra content white">
							<a href="#{_ctx}/course.seam?courseId=#{_item.id}"
								class="btn btn-blue btn-outline right floated clickableLink" style="font-weight: bold;">
								#{messages['Detail_View']} </a>
						</div>
					</div>
				</c:forEach>  

			</div>
			

		</s:fragment>

	</div>


			<s:decorate template="/layout/seamPaging.xhtml">
				<ui:param name="entityList" value="#{courseQuery}" />
			</s:decorate>

</ui:composition>
