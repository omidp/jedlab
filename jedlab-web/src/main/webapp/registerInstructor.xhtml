<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" template="/layout/layout.xhtml">

	<ui:define name="head">
		<script type="text/javascript" src="#{_ctx}/js/materialize.js"> </script>
		<link href="#{_ctx}/css/materialize.css" rel="stylesheet" />
		<style>
			
		</style>
	</ui:define>

	<ui:define name="body">
	
		<h:form enctype="multipart/form-data" id="instructorForm">
		
			<div class="ui middle aligned equal width center aligned padded grid">
	
				<div class="row">
	 
					
	
					<div class="fourtheen wide column">
						
						<div class="ui piled segment">
							<h2 class="ui teal image header">
								<div class="content">#{messages['Register_As_Instructor']}</div>
							</h2>
	
							<div styleClass="ui large form">
	
	
								<div class="field">
									<s:decorate id="uField" template="/layout/edit.xhtml">
										<ui:param name="required" value="#{true}" />
										<ui:define name="prefix">
											<i class="icon-user prefix"></i>
										</ui:define>
										<h:inputText 
											value="#{instructorRegisterAction.instance.username}" 
											onblur="checkUsernameAvailibility(this.value);"
											id="uname"
											required="true"/>
										<ui:define name="label">
											#{messages['User_Name']}
										</ui:define>
									</s:decorate>
								</div>
								<div class="field">
									<s:decorate id="pField" template="/layout/edit.xhtml">
										<ui:param name="required" value="#{true}" />
										<ui:define name="prefix">
											<i class="icon-lock prefix"></i>
										</ui:define>
											<h:inputSecret 
											value="#{instructorRegisterAction.instance.password}" 										
											id="upass"
											required="true"/>
										<ui:define name="label">
											#{messages['Password']}
										</ui:define>
									</s:decorate>
								</div>
								
								<div class="field">
									<s:decorate id="emailField" template="/layout/edit.xhtml">
										<ui:param name="required" value="#{true}" />
										<ui:define name="prefix">
											<i class="icon-mail prefix"></i>
										</ui:define>
										<h:inputText 
											value="#{instructorRegisterAction.instance.email}" 
											onblur="checkEmailAvailibility(this.value);"
											id="uname"
											required="true"/>
										<ui:define name="label">
											#{messages['Email']}
										</ui:define>
									</s:decorate>
								</div>
								
								<fieldset>
									<legend>#{messages['Personal_Data']}</legend>
									
									<div class="field">
										<s:decorate id="fnField" template="/layout/edit.xhtml">
											<ui:param name="required" value="#{true}" />
											<ui:define name="prefix">
												
											</ui:define>
											<h:inputText 
												value="#{instructorRegisterAction.instance.firstName}" 												
												id="fn"
												required="true"/>
											<ui:define name="label">
												#{messages['First_Name']}
											</ui:define>
										</s:decorate>
									</div>
									
									<div class="field">
										<s:decorate id="lnField" template="/layout/edit.xhtml">
											<ui:param name="required" value="#{true}" />
											<ui:define name="prefix">
												
											</ui:define>
											<h:inputText 
												value="#{instructorRegisterAction.instance.lastName}" 												
												id="ln"
												required="true"/>
											<ui:define name="label">
												#{messages['Last_Name']}
											</ui:define>
										</s:decorate>
									</div>
									
									<div class="field">
										<s:decorate id="mobileField" template="/layout/edit.xhtml">
											<ui:param name="required" value="#{true}" />
											<ui:define name="prefix">
												
											</ui:define>
											<h:inputText 
												value="#{instructorRegisterAction.instance.mobileNo}" 
												onblur="checkPhoneAvailibility(this.value);"
												id="mobile"
												required="true"/>
											<ui:define name="label">
												#{messages['Mobile']}
											</ui:define>
										</s:decorate>
									</div>
									
									<div class="field">
										<s:decorate id="nationalNoField" template="/layout/edit.xhtml">
											<ui:param name="required" value="#{true}" />
											<ui:define name="prefix">
												
											</ui:define>
											<h:inputText 
												value="#{instructorRegisterAction.instance.nationalNo}" 												
												id="nationaNo"
												required="true"/>
											<ui:define name="label">
												#{messages['National_No']}
											</ui:define>
										</s:decorate>
									</div>
									
									<div class="field">
										<s:decorate id="postalCodeField" template="/layout/edit.xhtml">
											
											<ui:define name="prefix">
												
											</ui:define>
											<h:inputText 
												value="#{instructorRegisterAction.instance.postalCode}" 												
												id="postalCode"
												required="true"/>
											<ui:define name="label">
												#{messages['Postal_Code']}
											</ui:define>
										</s:decorate>
									</div>
									
									<div class="field">
										<s:decorate id="bioField" template="/layout/edit.xhtml">									
											<ui:define name="prefix">
												
											</ui:define>
											<h:inputTextarea 
												rows="6"
												value="#{instructorRegisterAction.instance.bio}" 										
												id="bio"
												/>
											<ui:define name="label">
												#{messages['Bio']}
											</ui:define>
										</s:decorate>
									</div>
									
									<div class="field">
										<s:decorate id="addressField" template="/layout/edit.xhtml">									
											<ui:define name="prefix">
												
											</ui:define>
											<h:inputTextarea 
												rows="6"
												value="#{instructorRegisterAction.instance.address}"										
												id="address"
												/>
											<ui:define name="label">
												#{messages['Address']}
											</ui:define>
										</s:decorate>
									</div>
									
									<div class="field">
										<s:decorate id="imageField" template="/layout/edit.xhtml">									
											<ui:define name="prefix">
												
											</ui:define>
											<s:fileUpload id="file" data="#{instructorRegisterAction.uploadImage}"
												 accept="images/*"
												fileSize="#{instructorRegisterAction.fileSize}" />
											<ui:define name="label">
											#{messages['Image']}
											</ui:define>
										</s:decorate>
									</div>
								
								</fieldset>
								
								
								
								<h:commandButton 
									action="#{instructorRegisterAction.register()}" 
									styleClass="btn btn-blue"
									value="#{messages['Registeration_Label']}" />
	
	
							</div>
						</div>
						
					</div>
	
					
	
	
				</div>
			</div>
			
			<script type="text/javascript">

			function checkEmailAvailibility(val)
			{
				var mailErrorMsg = "#{messages['Email_Exists']}";
				jQuery.ajax({
					  url: "#{_ctx}/checkInstructorAvailibility",
					  data: {"un":val},
					  success: function(){console.log('suc')},
					  error: function(){
						common.notification(mailErrorMsg, "errormsg");
					  },
					  fail: function(){console.log('fail')},
					  dataType: "text"
					});
			}

			function checkPhoneAvailibility(val)
			{
				var phoneErrorMsg = "#{messages['Phone_Exists']}";
				jQuery.ajax({
					  url: "#{_ctx}/checkInstructorAvailibility",
					  data: {"un":val},
					  success: function(){console.log('suc')},
					  error: function(){
						common.notification(phoneErrorMsg, "errormsg");
					  },
					  fail: function(){console.log('fail')},
					  dataType: "text"
					});
				
			}

			function checkUsernameAvailibility(val)
			{
				var errorMsg = "#{messages['Username_Exists']}";
				jQuery.ajax({
					  url: "#{_ctx}/checkInstructorAvailibility",
					  data: {"un":val},
					  success: function(){console.log('suc')},
					  error: function(){
						common.notification(errorMsg, "errormsg");
					  },
					  fail: function(){console.log('fail')},
					  dataType: "text"
					});
			}
		</script>
		
		</h:form>

		

	</ui:define>
</ui:composition>
