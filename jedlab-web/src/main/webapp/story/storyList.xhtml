<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	template="/layout/layout.xhtml">

	<ui:define name="head">
		
		<style type="text/css">
			.ui.cards {margin:0 !important}
		</style>
	
	</ui:define>

	<ui:define name="body">  
		
		<div style="margin-top: 20px; margin-right: 10px"
		class="locale-direction">
		<div>  
			<s:link 
								styleClass="w3-btn w3-large w3-circle w3-xlarge w3-ripple w3-teal w3-right" 
								value="+" 
								id="createStoryBtn"
								propagation="none"
								view="/story/storyEdit.xhtml"  
								includePageParams="false"></s:link>	 
								<script type="text/javascript">
									jQuery(window).load(function(){

										jQuery("#createStoryBtn").popup({ content : "#{messages['Create_Story']}" });

									});
								</script>
			</div>					
			<div style="clear: both;" />					
		
			<div class="ui cards">
 			
				<c:forEach items="#{storyQuery.resultList}" var="_item">
				 
					<div class="ui card" data-story-id="#{_item.id}" style="cursor: pointer;">
					  <div class="content">
					    <div class="left floated meta">#{_item.socialDate}</div>
					    
					    <s:graphicImage styleClass="ui avatar image" value="#{_item.member.image}" 
					    	rendered="#{_item.member.hasImage}"></s:graphicImage>
					    
					    <span>#{_item.member.username}</span>
					    						     
					  </div>
					  <div class="image">
					    <s:graphicImage value="#{_item.image}"  style="height:250px;"
					    	rendered="#{_item.hasImage}">
					    	<s:transformImageSize maintainRatio="true" height="250"></s:transformImageSize>	
					    </s:graphicImage>
					    
					    <s:graphicImage value="/images/image-text.png" 
					    	rendered="#{!_item.hasImage}"></s:graphicImage>
					    	
					  </div>
					  <div class="content">
					    <span class="left floated">
					      <i class="heart outline like icon"></i>  
					      <s:link value="#{messages['Delete']}" rendered="#{s:hasRole('Admin')}" action="#{storyHome.remove()}" propagation="none" includePageParams="false">
					      	<f:param name="storyId" value="#{_item.id}"></f:param>
					      </s:link>
					    </span>
					    <i class="comment icon"></i>
					    
					  </div>
					</div>
				
				</c:forEach>
				
				<script>
					jQuery(".ui.card").each(function(){

						jQuery(this).click(function(){
							window.location = window.location.origin + "#{_ctx}/story/story.seam?storyId=" + jQuery(this).data('story-id');
						});

					});
				</script>
					
			</div>
		
		</div>
		

	</ui:define>
</ui:composition>
