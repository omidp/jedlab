<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core" template="/layout/layout.xhtml">

	<ui:define name="head">
		<link href="#{_ctx}/css/pygments.css" rel="stylesheet" />
	</ui:define>

	<ui:define name="body">


		<div class="gist-welcome gist-banner text-center">
			<div class="container">
				<h1>#{messages['Share_Your_Code']}</h1>
			</div>
			<s:button includePageParams="false" propagation="none"
				value="#{messages['Create']} #{messages['Sample']} #{messages['Code']}"
				view="/member/gistEdit.xhtml" styleClass="btn btn-blue"></s:button>
		</div>


		<div style="margin: 20px; height: 100%;" class="locale-direction">

			<h:form styleClass="form" id="srchCode">

				<s:decorate template="/layout/simpleEdit.xhtml" id="fieldCode">
					<ui:define name="label">#{messages['Search']} #{messages['Code']}</ui:define>

					<h:inputText dir="ltr" value="#{gistQuery.searchPattern}"
						style="direction:ltr;display:inline;width:95%" id="searchPattern" />
						
					<s:button type="image" image="#{_ctx}/images/reset.png"
						style="display:inline;cursor: pointer;"
						rendered="#{not empty searchPattern}" includePageParams="false"
						view="/gistList.xhtml" propagation="none"></s:button>

				</s:decorate>

				<h:commandButton action="#{gistQuery.redirect()}" value="Search"
					style="display:none;" id="btnSrch">
					<s:defaultAction></s:defaultAction>
				</h:commandButton>

			</h:form>
			
			<s:div rendered="#{empty gistQuery.resultList}" styleClass="ui block header">
				<h:outputText value="#{messages['No_Result']}" />
			</s:div>

			<div class="ui middle aligned divided list">


				<c:forEach items="#{gistQuery.resultList}" var="_item">
					<div class="item">

						<div class="right floated content"></div>

						<div class="content">
							<span class="header">#{_item.member.username}</span>
							<div class="description">
								#{_item.description}
							</div>
							<div class="meta">
								#{messages['Created_At']} <b>#{_item.socialDate}</b>
							</div>
						</div>
					</div>


					<div>
						<h:outputText value="#{_item.shortContent}" escape="false"
							style="direction:ltr;" styleClass="w3-input" />
						<div class="ui dimmer codeSnippet">
							<div class="content">
								<div class="center">
									<s:button propagation="none" includePageParams="false"
										styleClass="btn btn-green w3-margin" view="/gist.xhtml"
										value="#{messages['View']} #{messages['Code']}">
										<f:param name="gId" value="#{_item.id}"></f:param>
									</s:button>

									<s:button propagation="none" includePageParams="false"
										styleClass="btn btn-yellow w3-margin"
										view="/member/gistEdit.xhtml" rendered="#{_item.owner}"
										value="#{messages['Edit']} #{messages['Code']}">
										<f:param name="gistId" value="#{_item.id}"></f:param>
									</s:button>


									<s:button propagation="none" includePageParams="false"
										styleClass="btn btn-yellow w3-margin"
										action="#{gistHome.deleteById()}"
										rendered="#{s:hasRole('Admin')}" value="#{messages['Delete']}">
										<f:param name="gistId" value="#{_item.id}"></f:param>
									</s:button>

								</div>
							</div>
						</div>
					</div>


				</c:forEach>

			</div>

			<s:decorate template="/layout/seamPaging.xhtml"
				rendered="#{empty searchPattern}">
				<ui:param name="entityList" value="#{gistQuery}" />
			</s:decorate>

		</div>



		<script>
			jQuery(document).ready(function(){

				jQuery('.codeSnippet')
				  .dimmer({
				    on: 'hover'
				  });
				var srchMsg = "#{messages['Search']} #{messages['Code']}";
				jQuery("#srchCode\\:fieldCode\\:searchPattern").attr('placeholder', "Search Code");  

			});
		</script>


	</ui:define>
</ui:composition>
